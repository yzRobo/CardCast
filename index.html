<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CardCast - TCG Streaming Overlay Tool</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <h1>CardCast</h1>
                <span class="version">v1.0.0</span>
            </div>
            <div class="status-bar">
                <div class="status-item" id="obsStatus">
                    <span class="status-indicator"></span>
                    <span class="status-text">OBS Not Connected</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Games Panel -->
        <aside class="games-panel panel">
            <div class="panel-header">
                <h2 class="panel-title">Select Game</h2>
            </div>
            <div class="panel-content">
                <div class="games-list" id="gamesList">
                    <!-- Games will be populated here -->
                </div>
                
                <div class="download-options">
                    <h3 class="option-title">Download Options</h3>
                    <div class="sets-selector">
                        <label class="sets-option">
                            <input type="radio" name="sets" value="1" checked>
                            <span>Most recent set only</span>
                        </label>
                        <label class="sets-option">
                            <input type="radio" name="sets" value="3">
                            <span>Last 3 sets</span>
                        </label>
                        <label class="sets-option">
                            <input type="radio" name="sets" value="5">
                            <span>Last 5 sets</span>
                        </label>
                        <label class="sets-option">
                            <input type="radio" name="sets" value="10">
                            <span>Last 10 sets</span>
                        </label>
                        <label class="sets-option">
                            <input type="radio" name="sets" value="all">
                            <span>All available sets</span>
                        </label>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Search Section -->
        <main class="search-section">
            <div class="search-panel panel">
                <div class="search-input-group">
                    <input type="text" 
                           class="search-input" 
                           id="searchInput" 
                           placeholder="Select a game and download data to search..."
                           disabled>
                    <span class="search-icon">üîç</span>
                </div>
                
                <div class="search-results" id="searchResults">
                    <div class="empty-state">
                        <div class="empty-icon">üì¶</div>
                        <p>Select a game and download card data to begin</p>
                    </div>
                </div>
            </div>
        </main>

        <!-- Display Panel -->
        <aside class="display-panel panel">
            <div class="panel-header">
                <h2 class="panel-title">Display Controls</h2>
            </div>
            <div class="panel-content">
                <!-- Card Preview -->
                <div class="card-preview" id="cardPreview">
                    <div class="empty-state">
                        <div class="empty-icon">üé¥</div>
                        <p>No card selected</p>
                    </div>
                </div>
                
                <!-- Control Buttons -->
                <div class="controls-group">
                    <label class="controls-label">Display Position</label>
                    <div class="button-group">
                        <button class="control-btn" id="displayLeft" disabled>Left</button>
                        <button class="control-btn" id="displayRight" disabled>Right</button>
                    </div>
                </div>
                
                <div class="controls-group">
                    <div class="button-group">
                        <button class="control-btn danger" id="clearDisplay">Clear Display</button>
                    </div>
                </div>
                
                <!-- Pokemon Match Controls (shown when Pokemon is selected) -->
                <div class="controls-group" id="pokemonMatchControls" style="display: none;">
                    <label class="controls-label">Pokemon Match</label>
                    <a href="/pokemon-match-control" target="_blank" class="control-btn" style="display: block; text-align: center; text-decoration: none; margin-bottom: 10px;">
                        Open Match Control Panel ‚Üí
                    </a>
                    <div class="button-group">
                        <button class="control-btn" onclick="togglePokemonMatch()">Show/Hide Overlay</button>
                        <button class="control-btn" onclick="togglePrizeOverlay()">Show/Hide Prizes</button>
                    </div>
                </div>
                
                <!-- Deck Import Section -->
                <div class="controls-group">
                    <label class="controls-label">Import Deck List</label>
                    <textarea id="deckImportText" 
                              placeholder="Paste Limitless TCG or PTCGL deck list here..." 
                              rows="6"
                              style="width: 100%; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 0.5rem; padding: 0.5rem; color: var(--text-primary); font-size: 0.75rem; resize: vertical;"></textarea>
                    <input type="text" 
                           id="deckNameInput" 
                           placeholder="Deck Name (e.g., Gardevoir ex)"
                           style="width: 100%; margin-top: 0.5rem; padding: 0.5rem; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 0.5rem; color: var(--text-primary); font-size: 0.875rem;">
                    <div class="button-group" style="margin-top: 0.5rem;">
                        <button class="control-btn" onclick="importDeck()">Import Deck</button>
                        <button class="control-btn" onclick="clearDeckImport()">Clear</button>
                    </div>
                </div>
                
                <!-- Deck List Display Controls -->
                <div class="controls-group">
                    <label class="controls-label">Deck List Display</label>
                    <div class="button-group">
                        <button class="control-btn" onclick="showDeckList()">Show Deck List</button>
                        <button class="control-btn" onclick="hideDeckList()">Hide Deck List</button>
                    </div>
                    <button class="control-btn" onclick="addSelectedToDeck()" style="margin-top: 5px;">Add Selected Card to Deck</button>
                    <button class="control-btn danger" onclick="clearDeckList()" style="margin-top: 5px;">Clear Deck List</button>
                </div>
                
                <!-- OBS Links -->
                <div class="obs-links">
                    <h3>OBS Browser Sources</h3>
                    <div class="obs-link">
                        <span class="obs-link-label">Main Overlay</span>
                        <span class="obs-link-url" id="obsMainUrl">http://localhost:3888/overlay</span>
                        <button class="copy-btn" data-copy="obsMainUrl">Copy</button>
                    </div>
                    <div class="obs-link">
                        <span class="obs-link-label">Pokemon Match</span>
                        <span class="obs-link-url" id="obsPokemonUrl">http://localhost:3888/pokemon-match</span>
                        <button class="copy-btn" data-copy="obsPokemonUrl">Copy</button>
                    </div>
                    <div class="obs-link">
                        <span class="obs-link-label">Prize Cards</span>
                        <span class="obs-link-url" id="obsPrizesUrl">http://localhost:3888/prizes</span>
                        <button class="copy-btn" data-copy="obsPrizesUrl">Copy</button>
                    </div>
                    <div class="obs-link">
                        <span class="obs-link-label">Deck List</span>
                        <span class="obs-link-url" id="obsDecklistUrl">http://localhost:3888/decklist</span>
                        <button class="copy-btn" data-copy="obsDecklistUrl">Copy</button>
                    </div>
                </div>
                
                <!-- Recent Cards -->
                <div class="recent-cards">
                    <h3 class="recent-cards-title">Recent Cards</h3>
                    <div class="recent-cards-list" id="recentCards">
                        <!-- Recent cards will appear here -->
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Download Progress Modal -->
    <div class="download-progress" id="downloadProgress">
        <div class="download-title">Downloading...</div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="progress-text" id="progressText">0%</div>
    </div>

    <!-- Socket.io -->
    <script src="/socket.io/socket.io.js"></script>
    <!-- Main JavaScript -->
    <script src="/js/main.js"></script>
</body>
</html>